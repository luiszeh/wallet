{"ast":null,"code":"var _jsxFileName = \"/home/luisffg/Projetos/sd-012-project-trybewallet/src/components/ExpenseForm.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport InputValue from './InputValue';\nimport InputDescription from './InputDescription';\nimport InputCurrency from './InputCurrency';\nimport InputPayment from './InputPayment';\nimport InputTag from './InputTag';\nimport { addExpenses } from '../actions';\n\nclass ExpenseForm extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      id: 0,\n      currencies: '',\n      valor: 0,\n      description: '',\n      currency: 'USD',\n      paymentMethod: 'Dinheiro',\n      tag: 'Alimentação'\n    };\n    this.getCurrencies = this.getCurrencies.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  componentDidMount() {\n    this.getCurrencies();\n  }\n\n  async getCurrencies() {\n    try {\n      const response = await fetch('https://economia.awesomeapi.com.br/json/all');\n      const results = await response.json();\n      const filter = Object.keys(results).filter(currencies => currencies !== 'USDT');\n      this.setState({\n        currencies: filter\n      });\n      return results;\n    } catch (error) {\n      this.setState({\n        currencies: error\n      });\n    }\n  }\n\n  handleChange({\n    target\n  }) {\n    const {\n      id\n    } = target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    this.setState({\n      [id]: value\n    });\n  }\n\n  async handleClick() {\n    const {\n      valor,\n      description,\n      currency,\n      paymentMethod,\n      tag,\n      id\n    } = this.state;\n    const {\n      addExpenseAction\n    } = this.props;\n    const expenses = {\n      id,\n      value: valor,\n      description,\n      currency,\n      method: paymentMethod,\n      tag,\n      exchangeRates: await this.getCurrencies()\n    };\n    addExpenseAction(expenses);\n    this.setState(previus => ({\n      id: previus.id + 1\n    }));\n  }\n\n  render() {\n    const {\n      currencies,\n      valor,\n      description,\n      currency,\n      paymentMethod,\n      tag\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"section\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(InputValue, {\n      value: valor,\n      handleChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(InputDescription, {\n      value: description,\n      handleChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(InputCurrency, {\n      value: currency,\n      currencies: currencies,\n      handleChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(InputPayment, {\n      value: paymentMethod,\n      handleChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(InputTag, {\n      value: tag,\n      handleChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }, \"Adicionar despesa\")), /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, \"Voltar\")));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  currency: state.currency.currency\n});\n\nExpenseForm.propTypes = {\n  currency: PropTypes.arrayOf\n}.isRequired;\nexport default connect(mapStateToProps)(ExpenseForm);","map":{"version":3,"sources":["/home/luisffg/Projetos/sd-012-project-trybewallet/src/components/ExpenseForm.js"],"names":["React","Link","connect","PropTypes","InputValue","InputDescription","InputCurrency","InputPayment","InputTag","addExpenses","ExpenseForm","Component","constructor","state","id","currencies","valor","description","currency","paymentMethod","tag","getCurrencies","bind","handleChange","handleClick","componentDidMount","response","fetch","results","json","filter","Object","keys","setState","error","target","value","type","checked","addExpenseAction","props","expenses","method","exchangeRates","previus","render","mapStateToProps","propTypes","arrayOf","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport InputValue from './InputValue';\nimport InputDescription from './InputDescription';\nimport InputCurrency from './InputCurrency';\nimport InputPayment from './InputPayment';\nimport InputTag from './InputTag';\nimport { addExpenses } from '../actions';\n\nclass ExpenseForm extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      id: 0,\n      currencies: '',\n      valor: 0,\n      description: '',\n      currency: 'USD',\n      paymentMethod: 'Dinheiro',\n      tag: 'Alimentação',\n    };\n\n    this.getCurrencies = this.getCurrencies.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  componentDidMount() {\n    this.getCurrencies();\n  }\n\n  async getCurrencies() {\n    try {\n      const response = await fetch('https://economia.awesomeapi.com.br/json/all');\n      const results = await response.json();\n      const filter = Object.keys(results).filter((currencies) => currencies !== 'USDT');\n      this.setState({\n        currencies: filter,\n      });\n      return results;\n    } catch (error) {\n      this.setState({\n        currencies: error,\n      });\n    }\n  }\n\n  handleChange({ target }) {\n    const { id } = target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    this.setState({ [id]: value });\n  }\n\n  async handleClick() {\n    const { valor, description, currency, paymentMethod, tag, id } = this.state;\n    const { addExpenseAction } = this.props;\n    const expenses = {\n      id,\n      value: valor,\n      description,\n      currency,\n      method: paymentMethod,\n      tag,\n      exchangeRates: await this.getCurrencies(),\n    };\n    addExpenseAction(expenses);\n    this.setState((previus) => ({\n      id: previus.id + 1,\n    }));\n  }\n\n  render() {\n    const { currencies, valor, description, currency, paymentMethod, tag } = this.props;\n    return (\n      <section>\n        <form>\n          <InputValue value={ valor } handleChange={ this.handleChange } />\n          <InputDescription value={ description } handleChange={ this.handleChange } />\n          <InputCurrency\n            value={ currency }\n            currencies={ currencies }\n            handleChange={ this.handleChange }\n          />\n          <InputPayment value={ paymentMethod } handleChange={ this.handleChange } />\n          <InputTag value={ tag } handleChange={ this.handleChange } />\n          <button type=\"button\" onClick={ this.handleClick }>\n            Adicionar despesa\n          </button>\n        </form>\n        <Link to=\"/\">\n          <button type=\"button\">Voltar</button>\n        </Link>\n      </section>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  currency: state.currency.currency,\n});\n\nExpenseForm.propTypes = {\n  currency: PropTypes.arrayOf,\n}.isRequired;\n\nexport default connect(mapStateToProps)(ExpenseForm);\n"]},"metadata":{},"sourceType":"module"}